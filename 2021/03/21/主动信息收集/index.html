
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>主动信息收集 - Journey</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="主动信息收集
直接与目标系统交互通信
无法避免留下访问的痕迹
使用受控的第三方电脑进行探测
使用代理或已经被控制的主机
做好被封杀的准备
使用噪声迷惑目标，淹没真实的探测流量


扫描
发送不同的探,"> 
    <meta name="author" content="Noah AO"> 
    <link rel="alternative" href="atom.xml" title="Journey" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

    
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Journey</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="http://mxe0079.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">主动信息收集</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/cover.jpg) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/Information"><b>「
                    </b>INFORMATION<b> 」</b></a>
                
                March 21, 2021
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/2021/03/21/%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" title="主动信息收集" class="">主动信息收集</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>Words count</i>
                    26k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>Reading time</i>
                    23 mins.
                </span>
                
                
                <span id="/2021/03/21/主动信息收集/" class="leancloud_visitors" data-flag-title="主动信息收集">
                    <b class="iconfont icon-read"></b> <i>Read count</i>
                    <span class="leancloud-visitors-count">1000000</span>
                </span>
                
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/%E4%B8%BB%E5%8A%A8/" rel="tag">主动</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/%E6%94%B6%E9%9B%86/" rel="tag">收集</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h1 id="主动信息收集"><a href="#主动信息收集" class="headerlink" title="主动信息收集"></a>主动信息收集</h1><ul>
<li>直接与目标系统交互通信</li>
<li>无法避免留下访问的痕迹</li>
<li>使用受控的第三方电脑进行探测<ul>
<li>使用代理或已经被控制的主机</li>
<li>做好被封杀的准备</li>
<li>使用噪声迷惑目标，淹没真实的探测流量</li>
</ul>
</li>
<li>扫描<ul>
<li>发送不同的探测，返回结果判断目标状态</li>
</ul>
</li>
</ul>
<h1 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h1><ul>
<li>识别活着的主机（攻击目标）</li>
<li>输出IP地址列表</li>
<li>2、3、4 层发现</li>
</ul>
<h2 id="二层发现"><a href="#二层发现" class="headerlink" title="二层发现"></a>二层发现</h2><ul>
<li>优点：扫描速度快、可靠</li>
<li>缺点：不可路由</li>
<li>ARP协议<ul>
<li>抓包</li>
</ul>
</li>
</ul>
<h3 id="Arping"><a href="#Arping" class="headerlink" title="Arping"></a>Arping</h3><pre><code class="shell">arping 1.1.1.1 -c 1
arping 1.1.1.1 -d   # 发现arp欺骗
arping 192.168.1.2 -c 1 | grep &quot;bytes from&quot; | cut -d &quot; &quot; -f 5 | cut -d &quot;(&quot; -f 2 | cut -d &quot;)&quot; -f 1
</code></pre>
<pre><code class="shell">#!/bin/bash
if [ &quot;$#&quot; -ne 1 ]
then 
    echo &quot;Usage: ./arping.sh [interface]&quot;
    echo &quot;Example: ./arping.sh eth0&quot;
    echo &quot;Example will perform an ARP scan of the local subnet to which etho is assigned&quot;
    exit
 fi
 
 interface=$1
 prefix=$(ifconfig $interface | grep &#39;inet &#39; | awk &#39;&#123;print $2&#125;&#39; | cut -d &#39;.&#39; -f 1-3)
 for i in $(seq 1 254)
 do  
     arping $prefix.$i -c 1 | grep &quot;bytes from&quot; | cut -d &quot; &quot; -f 5 | cut -d &quot;(&quot; -f 2 | cut -d &quot;)&quot; -f 1
 done
</code></pre>
<pre><code class="shell">#!/bin/bash
if [ &quot;$#&quot; -ne 1 ]
then 
    echo &quot;Usage: ./arping.sh [file]&quot;
    echo &quot;Example: ./arping.sh target.txt&quot;
    echo &quot;Example will perform an ARP scan of the IP address which in the target.txt&quot;
    exit
 fi
 
 file=$1
 for i in $(cat $file)
 do  
     arping $i -c 1 | grep &quot;bytes from&quot; | cut -d &quot; &quot; -f 5 | cut -d &quot;(&quot; -f 2 | cut -d &quot;)&quot; -f 1
 done
</code></pre>
<h3 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h3><pre><code class="shell">nmap -sn 1.1.1.0/24
nmap -sn 1.1.1.1-254
nmap -iL target.txt -sn 
</code></pre>
<h3 id="Netdiscover"><a href="#Netdiscover" class="headerlink" title="Netdiscover"></a>Netdiscover</h3><ul>
<li><p>专用于二层发现</p>
</li>
<li><p>可用于无线交换网络</p>
</li>
<li><p>主动和被动探测</p>
</li>
<li><p>主动</p>
<pre><code class="shell">netdiscover -i eth0 -r 1.1.1.0/24
netdiscover -i target.txt
</code></pre>
</li>
<li><p> 被动：主动 arp 容易触发报警</p>
</li>
</ul>
<pre><code class="shell">netdiscover -p
</code></pre>
<h3 id="Scapy"><a href="#Scapy" class="headerlink" title="Scapy"></a>Scapy</h3><ul>
<li>作为Python库进行调用</li>
<li>也可作为单独的工具使用</li>
<li>抓包、分析、创建、修改、注入网络流量</li>
</ul>
<pre><code class="shell"># 相关组件
apt-get install python-gnuplot

# 相关函数
ARP().display()
sr1()
</code></pre>
<pre><code class="python">#!/usr/bin/python3

import logging
import subprocess
logging.getLogger(&quot;scapy.runtime&quot;).setLevel(logging.ERROR)
from scapy.all import *

if len(sys.argv) != 2:
    print(&quot;Usage: ./scapy-arp.sh [interface]&quot;)
    print(&quot;Example: ./scapy-arp.sh eth0&quot;)
    print(&quot;Example will perform an ARP scan of the local subnet to which etho is assigned&quot;)
    sys.exit()
   
interface = str(sys.argv[1])

prefix = str(subprocess.check_output(&quot;ifconfig &quot; + interface + &quot; | grep &#39;inet &#39; | awk &#39;&#123;print $2&#125;&#39; | cut -d &#39;.&#39; -f 1-3&quot;, shell=True).strip()).split(&#39;\&#39;&#39;)[1]

for i in range(1,254):
    answer = sr1(ARP(pdst=prefix+&#39;.&#39;+str(i)), timeout=0.1, verbose=0)
    if answer == None:
        pass
    else:
        print(prefix+&#39;.&#39;+str(i))
</code></pre>
<h2 id="三层发现"><a href="#三层发现" class="headerlink" title="三层发现"></a>三层发现</h2><ul>
<li>优点：可路由，速度较快</li>
<li>缺点：速度比二层慢，经常被边界防火墙过滤</li>
<li>IP、ICMP协议</li>
</ul>
<pre><code class="shell">ping 1.1.1.1 -c 2
ping -R 1.1.1.1  /  traceroute 1.1.1.1
ping 1.1.1.1 -c 1 | grep &quot;bytes from&quot; | cut -d &quot; &quot; -f 4 | cut -d &quot;:&quot; -f 1
scapy-ping.py
nmap 8.8.8.8 -sn
fping -g 8.8.8.1/24 -c 1
hping3 8.8.8.8 --icmp -c 1
</code></pre>
<h2 id="四层发现"><a href="#四层发现" class="headerlink" title="四层发现"></a>四层发现</h2><ul>
<li>优点：可路由，结果可靠，不被防火墙过滤，可以发现所有端口被过滤的主机</li>
<li>缺点：基于状态过滤的防火墙可过滤，全端口扫描速度慢</li>
<li>TCP：<ul>
<li>未经请求的 ACK —- RST</li>
<li>SYN —- SYN/ACK、RST</li>
</ul>
</li>
<li>UDP：<ul>
<li>ICMP端口不可达</li>
</ul>
</li>
</ul>
<pre><code class="shell"># ACK -- TCP  Port -- RST
# scapy:
answer = sr1(IP(dst=&quot;8.8.8.8&quot;)/TCP(flags=&quot;A&quot;, dport=80), timeout=1)
int(answer[TCP].flags) = 4  (R)

# nmap
nmap 1.1.1.1-254 -PU 53 -sn
nmap 1.1.1.1-254 -PA 80 -sn

# hping3
hping3 --udp 1.1.1.1 -c 1
hping3 1.1.1.1 -c 1
# hping3 TCP 发包 Flag清0
# Flag 0  ---  ACK、RST
</code></pre>
<h1 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h1><ul>
<li>端口对应网络服务及应用端程序</li>
<li>服务端程序的漏洞通过端口攻入</li>
<li>发现更开放的端口</li>
<li>更具体的攻击面</li>
</ul>
<h2 id="UDP端口扫描"><a href="#UDP端口扫描" class="headerlink" title="UDP端口扫描"></a>UDP端口扫描</h2><ul>
<li>ICMP port-unreachable 响应代表端口关闭</li>
</ul>
<pre><code class="shell"># Scapy UDP Scan
sr1(IP(dst=&quot;1.1.1.1&quot;)/UDP(dport=port), timeout=5, verbose=0)

# Nmap
nmap -sU 1.1.1.1
</code></pre>
<h2 id="TCP端口扫描"><a href="#TCP端口扫描" class="headerlink" title="TCP端口扫描"></a>TCP端口扫描</h2><ul>
<li><p>基于连接的协议</p>
</li>
<li><p>三次握手</p>
</li>
<li><p>隐蔽扫描  –  SYN</p>
<ul>
<li>不建立完整连接</li>
<li>应用日志不记录扫描行为 – 隐蔽</li>
</ul>
</li>
</ul>
<pre><code class="shell"># SYN -- SYN /ACK  or  RST
# Scapy
sr1(IP(dst=&quot;1.1.1.1&quot;)/TCP(flags=&quot;S&quot;, dport=80), timeout=1, verbose=1)
# flags: SA  or RA

# nmap
nmap -sS 1.1.1.1 -p 1-100 --open

# hping3
hping3 1.1.1.1 --scan 0-65535 -S
hping3 -c 10 -S -spoof 1.1.1.2 -p ++1 1.1.1.3
</code></pre>
<ul>
<li><p>僵尸扫描</p>
<ul>
<li>极度隐蔽</li>
<li>实施条件苛刻</li>
<li>可伪造源地址</li>
<li>选择僵尸机  ==&gt;  闲置系统 + 系统使用递增的IPID</li>
</ul>
</li>
</ul>
<pre><code class="shell"># Scapy
i = IP()
t = TCP()
rt = (i/t)
rz = (i/t)
rz[IP].dst = &quot;192.168.1.7&quot;
rz[TCP].dport = 445
rz[TCP].flags = &quot;SA&quot;
rt[IP].src = &quot;192.168.1.7&quot;
rt[IP].dst = &quot;192.168.1.8&quot;
rt[TCP].dport = 25
re[TCP].flags = &quot;S&quot;
az1 = sr1(rz)
at=sr1(rt, timeout=1)
az2 = sr1(rz)
</code></pre>
<p><strong>Zombie port scan.py</strong></p>
<pre><code class="python">#!/usr/bin/python3
from scapy.all import *
import sys

def ipid(zombie):
    # Test
    reply1 = sr1(IP(dst=zombie)/TCP(flags=&quot;SA&quot;), timeout=2, verbose=0)
    send(IP(dst=zombie)/TCP(flags=&quot;SA&quot;), verbose=0)
    reply2 = sr1(IP(dst=zombie)/TCP(flags=&quot;SA&quot;), timeout=2, verbose=0)
    if reply1[IP].id == (reply2[IP].id-2) :
        print(&quot;OK&quot;)
        response = input(&quot;Do you want to use this zombie to perform a scan? (Y/N)&quot;)
        if response == &quot;Y&quot; or &quot;y&quot;:
            target = input(&quot;Enter the IP address of the target system: &quot;)
            zombiescan(target, zombie)
            
def zombiescan(target, zombie):
    print(&quot;\nScanning target &quot; + target + &quot; with zombie &quot; + zombie + &quot;\n&quot;)
    for port in range(1,100):
        try:
            start_val = sr1(IP(dst=zombie)/TCP(flags=&quot;SA&quot;, dport=port), timeout=2, verbose=0)
            send(IP(src=zombie, dst=target)/TCP(flags=&quot;S&quot;, dport=port), verbose=0)
            end_val = sr1(IP(dst=zombie)/TCP(flags=&quot;SA&quot;, dport=port), timeout=2, verbose=0)
            if end_val[IP].id == (start_val[IP].id+2):
                print(port)
        except Exception:
            pass

if __name__ == &quot;__main__&quot;:
    zombie = input(&quot;Enter IP address to test IPID sequence: &quot;)
    ipid(zombie) 
</code></pre>
<pre><code class="shell"># nmap
nmap -p 445 192.168.1.7 --script=ipidseq.nse   # 判断僵尸机
nmap 192.168.1.8 -p 0-100 -sI 192.168.1.7 -Pn  # 僵尸扫描
</code></pre>
<ul>
<li>全连接端口扫描</li>
</ul>
<pre><code class="shell"># Scapy
iptables -A OUTPUT -p tcp --tcp-flags RST RST -d 192.168.1.2 -j DROP
sr1(IP(dst=&quot;1.1.1.1&quot;)/TCP(flags=&quot;S&quot;, dport=53), timeout=1, verbose=1)
sr1(IP(dst=&quot;1.1.1.1&quot;)/TCP(flags=&quot;A&quot;, ack=(response[TCP].seq+1), dport=53), timeout=1, verbose=1)

# Nmap
nmap -sT 192.168.1.8 -p 1-100

# dmitry
dmitry -p 1.1.1.1

# nc
nc -nv -w 1 -z 1.1.1.1 53
</code></pre>
<h1 id="服务扫描"><a href="#服务扫描" class="headerlink" title="服务扫描"></a>服务扫描</h1><ul>
<li><p>识别开放端口上运行的应用</p>
</li>
<li><p>识别目标操作系统</p>
</li>
<li><p>提高攻击效率</p>
<ul>
<li>Banner捕获</li>
<li>服务识别</li>
<li>操作系统识别</li>
<li>SNMP分析</li>
<li>防火墙识别</li>
</ul>
</li>
<li><p>Banner</p>
<ul>
<li>软件开发商</li>
<li>软件名称</li>
<li>服务类型</li>
<li>版本号  ==&gt; 直接发现已知的漏洞和弱点</li>
</ul>
</li>
<li><p>建立连接后直接获取Banner</p>
</li>
<li><p>另类服务识别方法：</p>
<ul>
<li>特征行为和响应字段</li>
<li>不同的响应可用于识别底层操作系统</li>
</ul>
</li>
<li><p>SNMP</p>
<ul>
<li>简单网络管理协议</li>
<li>Community strings</li>
<li>信息查询或重新配置</li>
</ul>
</li>
<li><p>识别和绕过防火墙筛选</p>
</li>
</ul>
<p><strong>Banner Scan</strong></p>
<pre><code class="shell"># nc
nc -nv 192.168.1.8 22

# dmitry
dmitry -pb 192.168.1.8

# nmap
nmap -sT 1.1.1.1 -p 1-100 --script=banner.nse

# amap
amap -B 1.1.1.1 1-65535 | grep on
</code></pre>
<pre><code class="python">#!/usr/bin/python3
# Python socket
# Socket 模块用于连接网络服务

import socket
import select
import sys

if len(sys.argv) != 4:
    print(&quot;Usage ./banner_grab.py [Target_iIP] &#123;First port&#125; [Last port]&quot;)
    sys.exit()

ip = sys.argv[1]
start = int(sys.argv[2])
end = int(sys.argv[3])

for port in range(start, end):
    try:
        bangrab = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        bangrab.connect((ip, port))
        ready = select.select([bangrab], [], [], 1)
        if ready[0]:
            print(&quot;TCP Port &quot; + str(port) + &quot; - &quot; + bangrab.recv(4096).decode())
            bangrab.close()
    except Exception:
        pass
</code></pre>
<p><strong>服务识别</strong></p>
<pre><code class="shell"># nmap 响应特征分析识别服务 
# 发送系列复杂的探测和依据响应特征signature
nmap 1.1.1.1 -p 80 -sV

# amap
amap 1.1.1.1 1-100 -q
ampa 1.1.1.1 1-100 -qb

# 使用nc手动判断
nc -nv 1.1.1.1 80
</code></pre>
<h1 id="操作系统识别"><a href="#操作系统识别" class="headerlink" title="操作系统识别"></a>操作系统识别</h1><ul>
<li>操作系统识别技术<ul>
<li>种类繁多</li>
<li>好产品采用多种技术组合</li>
</ul>
</li>
<li>TTL起始值<ul>
<li>Windows：128（65 - 128）</li>
<li>Linux / Unix：64（1 - 64）</li>
<li>某些Unix：255</li>
</ul>
</li>
</ul>
<pre><code class="python">#!/usr/bin/python3
# ttl值判断
from scapy.all import *
import sys

if len(sys.argv) != 2:
    print(&quot;Usage: ./os_ttl.py [Target]&quot;)
    sys.exit()

ip = sys.argv[1]

ans = sr1(IP(dst=str(ip))/ICMP(), timeout=1, verbose=0)
if ans == None:
    print(&quot;No response&quot;)
elif int(ans[IP].ttl) &lt;= 64:
    print(&quot;Linux&quot;)
else:
    print(&quot;Windows&quot;)
</code></pre>
<pre><code class="shell"># nmap
nmap -O 1.1.1.1

# xprobe2  有误差
xprobe2 1.1.1.1

# p0f  被动扫描
p0f
</code></pre>
<ul>
<li>被动操作系统识别<ul>
<li>IDS</li>
<li>抓包分析</li>
</ul>
</li>
<li>被动扫描<ul>
<li><strong>p0f</strong></li>
<li>对包进行抓取分析</li>
<li>结合ARP地址欺骗识别全网OS</li>
</ul>
</li>
</ul>
<h1 id="SNMP"><a href="#SNMP" class="headerlink" title="SNMP"></a>SNMP</h1><ul>
<li><p>snmp (简单网络管理协议)</p>
<ul>
<li><p>UDP  S: 161  C: 162</p>
</li>
<li><p>信息的金矿</p>
</li>
<li><p>经常被错误配置</p>
</li>
<li><p>public / private / manager</p>
</li>
</ul>
</li>
<li><p>安装 SNMP 服务</p>
<ul>
<li>Windows：Win+R appwiz.cpl 添加服务组件</li>
</ul>
</li>
<li><p>MIB Tree</p>
<ul>
<li>SNMP Management information Base (MIB)</li>
<li>树形的网络设备管理功能数据库</li>
<li>1.3.6.1.4.1.77.1.2.25</li>
</ul>
</li>
</ul>
<pre><code class="shell"># onesixtyone
onesixtyone 1.1.1.1 public
onesixtyone -c dict.txt -i hosts -o my.log -w 100

# snmpwalk
snmpwalk 1.1.1.1 -c public -v 2c
snmpwalk -c public -v 2c 1.1.1.1 1.3.6.1.4.1.77.1.2.25

# snmpcheck 不好用
snmpcheck 1.1.1.1
</code></pre>
<h1 id="SMB"><a href="#SMB" class="headerlink" title="SMB"></a>SMB</h1><ul>
<li>Server Message Block 协议<ul>
<li>实现复杂</li>
<li>默认开发</li>
<li>文件共享</li>
<li>空会话无身份认证访问（SMB1）<ul>
<li>密码策略</li>
<li>用户名</li>
<li>组名</li>
<li>机器号</li>
<li>用户名、组SID</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="shell"># nmap
nmap -v -p 139,445 192.168.1.0/24 --open
nmap 192.168.1.8 -p 139,445 --script=smb-os-discovery.nse

# nbtscan
# 可以跨网段扫描MAC地址
nbtscan -r 192.168.1.0/24

# enum4linux
enum4linux -a 192.168.1.8
</code></pre>
<h1 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h1><pre><code class="shell"># nc 
nc -nv 1.1.1.1 25
# VERY root

# namp
nmap smtp.163.com -p 25 --script=smtp-enum-users.nse --script-args=smtp-enum-users.methods=&#123;VRFY&#125;
nmap smtp.163.com -p 25 --script=smtp-open-relay.nse
</code></pre>
<h1 id="防火墙扫描"><a href="#防火墙扫描" class="headerlink" title="防火墙扫描"></a>防火墙扫描</h1><ul>
<li>通过检查回包，可能识别端口是否经过防火墙过滤</li>
</ul>
<table>
<thead>
<tr>
<th>Send</th>
<th>Response</th>
<th>Send</th>
<th>Response</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>SYN</td>
<td>No</td>
<td>ACK</td>
<td>RST</td>
<td>Filtered</td>
</tr>
<tr>
<td>SYN</td>
<td>SYN+ACK / SYN + RST</td>
<td>ACK</td>
<td>No</td>
<td>Filtered</td>
</tr>
<tr>
<td>SYN</td>
<td>SYN+ACK / SYN + RST</td>
<td>ACK</td>
<td>RST</td>
<td>Unfiltered / Open</td>
</tr>
<tr>
<td>SYN</td>
<td>No</td>
<td>ACK</td>
<td>No</td>
<td>Closed</td>
</tr>
</tbody></table>
<p><strong>Scapy</strong></p>
<pre><code class="python">#!/usr/bin/python3

import sys
from scapy.all import *

if len(sys.argv) != 3:
    print(&quot;Usage ./firewall_detect.py 1.1.1.1 80&quot;)
    sys.exit()
    
ip = sys.argv[1]
port = int(sys.argv[2])

ACK_response = sr1(IP(dst=ip)/TCP(dport=port, flags=&#39;A&#39;), timeout=1, verbose=0)
SYN_response = sr1(IP(dst=ip)/TCP(dport=port, flags=&#39;S&#39;), timeout=1, verbose=0)
if (ACK_response == None) and (SYN_response == None):
    print(&quot;Closed&quot;)
elif (SYN_response == None) and (int(ACK_response[TCP].flags) == 4):
    print(&quot;Filtered&quot;)
elif (int(SYN_response[TCP].flags) == 18 or 20):
    print(&quot;Filtered&quot;)
else:
    print(&quot;Open&quot;)
</code></pre>
<pre><code class="shell"># Nmap
nmap -sA 1.1.1.1 -p 22
</code></pre>
<h1 id="负载均衡识别"><a href="#负载均衡识别" class="headerlink" title="负载均衡识别"></a>负载均衡识别</h1><ul>
<li>广域网负载均衡<ul>
<li>DNS</li>
</ul>
</li>
</ul>
<pre><code class="shell"># lbd
lbd www.baidu.com
</code></pre>
<h1 id="WAF-识别"><a href="#WAF-识别" class="headerlink" title="WAF 识别"></a>WAF 识别</h1><ul>
<li>WEB应用防火墙</li>
</ul>
<pre><code class="shell"># wafw00f
wafw00f -l
wafw00f http://www.microsoft.com

# nmap
nmap www.baidu.com --script=http-waf-detect.nse
</code></pre>
<h1 id="Nmap-1"><a href="#Nmap-1" class="headerlink" title="Nmap"></a>Nmap</h1><pre><code>root@kali:~/Script/infor_detection# nmap
Nmap 7.80 ( https://nmap.org )                                                                                                                       
Usage: nmap [Scan Type(s)] [Options] &#123;target specification&#125;                                                                                     
TARGET SPECIFICATION:                                                                                                                           
  Can pass hostnames, IP addresses, networks, etc.
  Ex: scanme.nmap.org, microsoft.com/24, 192.168.0.1; 10.0.0-255.1-254                                                                               
  -iL &lt;inputfilename&gt;: Input from list of hosts/networks                                                                                         
  -iR &lt;num hosts&gt;: Choose random targets                                                                                                         
  --exclude &lt;host1[,host2][,host3],...&gt;: Exclude hosts/networks                                                                                 
  --excludefile &lt;exclude_file&gt;: Exclude list from file                                                                                                                                                                   
HOST DISCOVERY:                                                                                                                                 
  -sL: List Scan - simply list targets to scan                                                                                                   
  -sn: Ping Scan - disable port scan                                                                                                             
  -Pn: Treat all hosts as online -- skip host discovery                                                                                         
  -PS/PA/PU/PY[portlist]: TCP SYN/ACK, UDP or SCTP discovery to given ports                                                                                                                                           
  -PE/PP/PM: ICMP echo, timestamp, and netmask request discovery probes                                                                         
  -PO[protocol list]: IP Protocol Ping                                                                                                           
  -n/-R: Never do DNS resolution/Always resolve [default: sometimes]                                                                             
  --dns-servers &lt;serv1[,serv2],...&gt;: Specify custom DNS servers                                                                                 
  --system-dns: Use OS&#39;s DNS resolver                                                                                                           
  --traceroute: Trace hop path to each host                                                                                                     
  
SCAN TECHNIQUES:                                                                                                                                 
  -sS/sT/sA/sW/sM: TCP SYN/Connect()/ACK/Window/Maimon scans                                                                                     
  -sU: UDP Scan                                                                                                                                 
  -sN/sF/sX: TCP Null, FIN, and Xmas scans                                                                                                       
  --scanflags &lt;flags&gt;: Customize TCP scan flags                                                                                                 
  -sI &lt;zombie host[:probeport]&gt;: Idle scan                                                                                                       
  -sY/sZ: SCTP INIT/COOKIE-ECHO scans                                                                                                           
  -sO: IP protocol scan                                                                                                                         
  -b &lt;FTP relay host&gt;: FTP bounce scan                                                                                                           
PORT SPECIFICATION AND SCAN ORDER:                                                                                                               
  -p &lt;port ranges&gt;: Only scan specified ports                                                                                                   
    Ex: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9                                                                                 
  --exclude-ports &lt;port ranges&gt;: Exclude the specified ports from scanning                                                                                                                                         
  -F: Fast mode - Scan fewer ports than the default scan                                                                                         
  -r: Scan ports consecutively - don&#39;t randomize                                                                                                 
  --top-ports &lt;number&gt;: Scan &lt;number&gt; most common ports                                                                                         
  --port-ratio &lt;ratio&gt;: Scan ports more common than &lt;ratio&gt;                                                                                                                                                             
SERVICE/VERSION DETECTION:                                                                                                                       
  -sV: Probe open ports to determine service/version info                                                                                       
  --version-intensity &lt;level&gt;: Set from 0 (light) to 9 (try all probes)                                                                         
  --version-light: Limit to most likely probes (intensity 2)                                                                                     
  --version-all: Try every single probe (intensity 9)                                                                                           
  --version-trace: Show detailed version scan activity (for debugging)                                                                                                                                                   
SCRIPT SCAN:                                                                                                                                     
  -sC: equivalent to --script=default                                                                                                           
  --script=&lt;Lua scripts&gt;: &lt;Lua scripts&gt; is a comma separated list of
           directories, script-files or script-categories
           
  --script-args=&lt;n1=v1,[n2=v2,...]&gt;: provide arguments to scripts
  
  --script-args-file=filename: provide NSE script args in a file
  
  --script-trace: Show all data sent and received
  
  --script-updatedb: Update the script database.
  
  --script-help=&lt;Lua scripts&gt;: Show help about scripts.
           &lt;Lua scripts&gt; is a comma-separated list of script-files or
           script-categories.
           
           
OS DETECTION:

  -O: Enable OS detection
  
  --osscan-limit: Limit OS detection to promising targets
  
  --osscan-guess: Guess OS more aggressively
  
  
TIMING AND PERFORMANCE:
  Options which take &lt;time&gt; are in seconds, or append &#39;ms&#39; (milliseconds),
  &#39;s&#39; (seconds), &#39;m&#39; (minutes), or &#39;h&#39; (hours) to the value (e.g. 30m).
  
  -T&lt;0-5&gt;: Set timing template (higher is faster)
  
  --min-hostgroup/max-hostgroup &lt;size&gt;: Parallel host scan group sizes
  
  --min-parallelism/max-parallelism &lt;numprobes&gt;: Probe parallelization
  
  --min-rtt-timeout/max-rtt-timeout/initial-rtt-timeout &lt;time&gt;: 
  
  
Specifies
      probe round trip time.
  
  --max-retries &lt;tries&gt;: Caps number of port scan probe retransmissions.
  
  --host-timeout &lt;time&gt;: Give up on target after this long
  
  --scan-delay/--max-scan-delay &lt;time&gt;: Adjust delay between probes
  
  --min-rate &lt;number&gt;: Send packets no slower than &lt;number&gt; per second
  
  --max-rate &lt;number&gt;: Send packets no faster than &lt;number&gt; per second
  
  
FIREWALL/IDS EVASION AND SPOOFING:
  
  -f; --mtu &lt;val&gt;: fragment packets (optionally w/given MTU)
  
  -D &lt;decoy1,decoy2[,ME],...&gt;: Cloak a scan with decoys
  
  -S &lt;IP_Address&gt;: Spoof source address
  
  -e &lt;iface&gt;: Use specified interface
  
  -g/--source-port &lt;portnum&gt;: Use given port number
  
  --proxies &lt;url1,[url2],...&gt;: Relay connections through HTTP/SOCKS4
  

proxies
  
  --data &lt;hex string&gt;: Append a custom payload to sent packets
  
  --data-string &lt;string&gt;: Append a custom ASCII string to sent packets
  
  --data-length &lt;num&gt;: Append random data to sent packets
  
  --ip-options &lt;options&gt;: Send packets with specified ip options
  
  --ttl &lt;val&gt;: Set IP time-to-live field
  
  --spoof-mac &lt;mac address/prefix/vendor name&gt;: Spoof your MAC address
  
  --badsum: Send packets with a bogus TCP/UDP/SCTP checksum
  
  
OUTPUT:
  
  -oN/-oX/-oS/-oG &lt;file&gt;: Output scan in normal, XML, s|&lt;rIpt kIddi3,
     and Grepable format, respectively, to the given filename.
  
  -oA &lt;basename&gt;: Output in the three major formats at once
  
  -v: Increase verbosity level (use -vv or more for greater effect)
  
  -d: Increase debugging level (use -dd or more for greater effect)
  
  --reason: Display the reason a port is in a particular state
  
  --open: Only show open (or possibly open) ports
  
  --packet-trace: Show all packets sent and received
  
  --iflist: Print host interfaces and routes (for debugging)
  
  --append-output: Append to rather than clobber specified output files
  
  --resume &lt;filename&gt;: Resume an aborted scan
  
  --stylesheet &lt;path/URL&gt;: XSL stylesheet to transform XML output to
  

HTML
  
  --webxml: Reference stylesheet from Nmap.Org for more portable XML
  
  --no-stylesheet: Prevent associating of XSL stylesheet w/XML output
  
  
MISC:
  
  -6: Enable IPv6 scanning
  
  -A: Enable OS detection, version detection, script scanning, and
  

traceroute
  
  --datadir &lt;dirname&gt;: Specify custom Nmap data file location
  
  --send-eth/--send-ip: Send using raw ethernet frames or IP packets
  
  --privileged: Assume that the user is fully privileged
  
  --unprivileged: Assume the user lacks raw socket privileges
  
  -V: Print version number
  
  -h: Print this help summary page.


EXAMPLES:
  
  nmap -v -A scanme.nmap.org
  
  nmap -v -sn 192.168.0.0/16 10.0.0.0/8
  
  nmap -v -iR 10000 -Pn -p 80
</code></pre>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/LoveStory.mp3'></li>
                
                    
                
                <li title='1' data-url='/statics/22.mp3'></li>
                
                    
                
                <li title='2' data-url='/statics/Lover.mp3'></li>
                
                    
                
                <li title='3' data-url='/statics/BlankSpace.mp3'></li>
                
                    
                
                <li title='4' data-url='/statics/Red.mp3'></li>
                
                    
                
                <li title='5' data-url='/statics/IKnowYouWereTrouble.mp3'></li>
                
                    
                
                <li title='6' data-url='/statics/WeAreNeverEverGettingBackTogether.mp3'></li>
                
                    
            </ul>
            
            
            <div class="post-nav">
                <hr>
                
                    <div class="post-nav-item">Previous Post:<a href="/2021/03/21/Install/" rel="prev" 
                        title="Install">Install
                      </a></div>
                
                
                    <div class="post-nav-item">Next Post:<a href="/2021/03/21/kali%E4%BB%8B%E7%BB%8D/" rel="next" 
                        title="介绍">介绍</a></div>
                                
            </div>   
                        
            
            
            <div id="vcomments"></div>
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="https://res.cloudinary.com/tridiamond/image/upload/v1573019751/TriDiamond_logo_ui_xeublz.jpg" height=300 width=300></img>
                    <p>Noah AO</p>
                    <span>To follow the path: look to the master, follow the master, walk with the master, see through the master, become the master.</span>
                    <dl>
                        <dd><a href="https://github.com/mxe0079/" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://twitter.com/noahao77/" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="https://stackoverflow.com/users/15444880/noah-ao/" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">4 <p>Articles</p></a></li>
                    <li><a href="/categories">8 <p>Categories</p></a></li>
                    <li><a href="/tags">7 <p>Tags</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>Contents</h4>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.</span> <span class="toc-text">主动信息收集</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%91%E7%8E%B0"><span class="toc-number">2.</span> <span class="toc-text">发现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E5%B1%82%E5%8F%91%E7%8E%B0"><span class="toc-number">2.1.</span> <span class="toc-text">二层发现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Arping"><span class="toc-number">2.1.1.</span> <span class="toc-text">Arping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nmap"><span class="toc-number">2.1.2.</span> <span class="toc-text">Nmap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Netdiscover"><span class="toc-number">2.1.3.</span> <span class="toc-text">Netdiscover</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scapy"><span class="toc-number">2.1.4.</span> <span class="toc-text">Scapy</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%B1%82%E5%8F%91%E7%8E%B0"><span class="toc-number">2.2.</span> <span class="toc-text">三层发现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E5%B1%82%E5%8F%91%E7%8E%B0"><span class="toc-number">2.3.</span> <span class="toc-text">四层发现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">3.</span> <span class="toc-text">端口扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#UDP%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">3.1.</span> <span class="toc-text">UDP端口扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">3.2.</span> <span class="toc-text">TCP端口扫描</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E6%89%AB%E6%8F%8F"><span class="toc-number">4.</span> <span class="toc-text">服务扫描</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%86%E5%88%AB"><span class="toc-number">5.</span> <span class="toc-text">操作系统识别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SNMP"><span class="toc-number">6.</span> <span class="toc-text">SNMP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SMB"><span class="toc-number">7.</span> <span class="toc-text">SMB</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SMTP"><span class="toc-number">8.</span> <span class="toc-text">SMTP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E6%89%AB%E6%8F%8F"><span class="toc-number">9.</span> <span class="toc-text">防火墙扫描</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%AF%86%E5%88%AB"><span class="toc-number">10.</span> <span class="toc-text">负载均衡识别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WAF-%E8%AF%86%E5%88%AB"><span class="toc-number">11.</span> <span class="toc-text">WAF 识别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Nmap-1"><span class="toc-number">12.</span> <span class="toc-text">Nmap</span></a></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2021
        <span class="gradient-text">
            Noah AO
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.5" target="_blank" rel="noopener">v1.4.5</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>


 
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>
 
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
 
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
 
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>
 
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>
   
<script src="/js/busuanzi.min.js"></script>

<script>
  $(document).ready(function () {
    if ($('span[id^="busuanzi_"]').length) {
      initialBusuanzi();
    }
  });
</script>
 
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-149874671-1');
</script>
 

<script>
  function initialTyped() {
    var typedTextEl = $('.typed-text');
    if (typedTextEl && typedTextEl.length > 0) {
      var typed = new Typed('.typed-text', {
        strings: ['To follow the path: look to the master, follow the master, walk with the master, see through the master, become the master.', '沿着这样一条道路：关注大师，跟随大师，与大师同行，洞察大师，成为大师。'],
        typeSpeed: 90,
        loop: true,
        loopCount: Infinity,
        backSpeed: 20,
      });
    }
  }

  if ($('.article-header') && $('.article-header').length) {
    $(document).ready(function () {
      initialTyped();
    });
  }
</script>

 
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var valine = new Valine();

  function initValine(path) {
    if (!path) path = window.location.pathname;
    let language = 'en';
    if (!language) {
      language = 'en';
    } else {
      language = language.toLowerCase();
    }
    valine.init({
      el: '#vcomments',
      appId: 'QHCOIEBlyjBUMAjaE5ilzafk-gzGzoHsz',
      appKey: 'ggeGwz8ypB9uiAIYSRH5T0PF',
      notify: 'false',
      verify: 'false',
      avatar: 'mp',
      placeholder: 'Leave your throughs behind~',
      visitor: 'true',
      path: path,
      lang: language,
    });
  }

  $(document).ready(function () {
    initValine();
  });
</script>



 <!-- 例：百度统计 --> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?your_code"; var s = document.getElementsByTagName("script")[0];  s.parentNode.insertBefore(hm, s); })(); </script> 

</html>
